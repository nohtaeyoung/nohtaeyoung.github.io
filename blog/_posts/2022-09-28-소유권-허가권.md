---
layout: post
title: Linux 소유권&허가권
subtitle: 소유권 & 허가권 & 초기 허가권
gh-repo: nohtaeyoung/nohtaeyoung.github.io
gh-badge: [star, fork, follow]
cover-img: /assets/img/security.jpg
tags: [Linux]
comments: true
---

## 소유권(ownership)
- <b style="color:red">개체에 대한 소유자의 소유 그룹</b>
- <b>Linux 시스템의 모든 개체(파일 및 디렉터리)는 소유자와 소유 그룹이 지정되어 있다.</b>
- 파일 생성 시 파일을 생성한 계정이 파일이 소유자가 된다.
- 파일 생성 시 파일을 생성한 계정의 기본 그룹이 파일의 소유 그룹이 된다.
- 명령어를 이용해 소유자와 소유 그룹 변경이 가능 핟.
- 확인
  - <b>#ls -i [파일이름]</b>
  
  ![소유권1](../assets/img/소유권1.png)
  
## 소유권(ownership)관리 명령어

| ------------------------------ | :--------------: | 
|chown|파일의 소유권 변경|
|chgrp|파일의 소유 그룹 소유권 변경|

## chown 명령어
- 개체(파일 및 디렉터리)의 소유자 및 소유 그룹 변경
- 계정이름/그룹 이름 대신 UID/GID 로 사용 가능

- 사용법
  - <b>#chown [옵션] [계정이름] [파일 이름]</b>
  - <b>#chown [옵션] [:그룹 이름] [파일 이름]</b>
  - <b>#chown [옵션] [게정 이름:그룹이름] [파일 이름]</b>
  
|OPTIONS|
| ------------------------------ | :--------------: | 
|-R|하위 디렉터리 및 파일 전체의 소유권 변경|

## CHGRP 명령어
- 개체(파일 및 디렉터리)의 소유 그룹 변경

- 사용법
  - <b>#chgrp [옵션] [gid 또는 그룹 이름] [파일 이름]</b>

|OPTIONS|
| ------------------------------ | :--------------: | 
|-R|하위 디렉터리 및 파일 전체의 소유권 변경|

## 허가권(Permission)
- 멀티 유저 환경에서 <b style="color:red">개체(파일, 디렉터리 등)에 접근할 수 있는 자격</b>
- 개체를 읽거나(read), 쓰거나(write), 실행(execute)하는 행위
- <b>소유자(user), 소유그룹(group), 나머지 사용자(other) 단위로 권한을 부여한다.</b>
- 확인
  - <b>#ls -l [파일 이름]</b>

 ![소유권2](../assets/img/소유권2.png)
 
 ## 허가권(Permission) 관리 명령어
 
 | ------------------------------ | :--------------: | 
|chmod|파일의 허가권 변경|
|umask|개체가 생성될 때 부여되는 기본 permission 설정|

## 허가권(Permission) 구분
- 앞에서부터 3자리씩 소유자(user), 소유 그룹(group), 나머지 사용자(other)로 구분 한다.
- 마지막(10번째 문자) . 은 확장 권한(권한 ACL)을 나타낸다.

 ![소유권3](../assets/img/소유권3.png)
 
 ## 허가권(Permission) 종류
 
 |문자||허가권|파일|디렉터리|
| ------------------------------ | :--------------: | :--------------: | :--------------: | 
|r|읽기|파일 내용을 읽을 수 있는 권한|디렉터리 목록 확인 권한|
|w|쓰기|파일 내용을 쓰거나 삭제할 수 있는 권한|디렉터리 안에서 파일을 생성,삭제 할 수 있는 권한|
|x|실행|실행파일(바이너리 파일)에 대한 실행 권한|디렉터리의 경로 변경, 디렉터리 안에 있는 항복을 읽을 수 있는 권한|

## 허가권(Permission) 인증 절차
1. 사용자가 xxx.txt파일을 수정하기 위하여 쓰기 권한을 요청
2. xxx.txt파일의 uid와 권한을 요청한 사용자의 uid를 비교
3. 일치하면 요청한 사용자를 파일의 소유주로 인정하고 소유주(user)의 permission을 부여
4. 일치하지 않으면 gid를 비교
5. gid가 일치하면 사용자를 파일의 소유 그룹 멤버로 인정하고 소유 그룹(group)에 할당된 permission을 부여
6. gid도 일치하지 않으면 나머지 사용자(other)에 해당하는 permission을 부여

## chmod
- 개체(파일 및 디렉터리)의 허가권 변경
- 상대모드 또는 절대모드로 허가권을 지정 한다.

- 사용법
  - #<b>chmod [<b style="color:red">상대모드 또는 절대모드 허가권</b>] [파일이름]</b>

## 허가권(Permission) 상대 모드
- <b style="color:red">[소유권][연산자][허가권]</b>

 ![소유권4](../assets/img/소유권4.png)
 
 ## 허가권(Permission) 절대 모드ㅜ
 - <b style="color:red">권한을 숫자 형태로 표현</b>

![소유권5](../assets/img/소유권5.png)

## umask
- 리눅스 시스템에서 자원을 생성할 때 설정되는 기본 권한을 통합 관리하기 위해 사용
- <b style="color:red">디렉터리는 777 권한, 파일은 666 권한</b>에서 <b style="color:red">umask 값을 뺀 값</b>이 기본 권한으로 설정된다.
  - 파일은 기본 실행권한을 빼고 설정 된다.

- umask 값 확인
  - <b>#umask</b>

- umask 값 변경
  - <b>#umask [값]</b>
  - ex) #umask 137

- umask 값 영구 변경
  - /etc/profile 파일에서 설정
